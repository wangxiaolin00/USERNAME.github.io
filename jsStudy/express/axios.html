<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>axios </title>
  <script crossorigin="anonymous" src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.js"></script>
</head>

<body>

  <h2>Axios 是一个基于 promise 的 HTTP 库,可以用在浏览器和 Node.js 中</h2>
  <button class="btn1">GET</button>
  <button class="btn2">POST</button>
  <button class="btn3">AJAX</button>
  <script>
    /*
                        加crossorigin属性         |    不加crossorigin属性

资源服务器开启cors     可以正常加载，准确捕获错误   |    可以正常加载，无法准确捕获错误(只能捕获到:Script error.)

资源服务器不开启cors    无法正常加载              |    可以正常加载，无法准确捕获错误(只能捕获到:Script error.)
    */
    const btn1 = document.querySelector('.btn1')
    const btn2 = document.querySelector('.btn2')
    const btn3 = document.querySelector('.btn3')
    btn1.addEventListener('click', function () {
      //evnet.preventDefault()阻止默认行为
      console.log(1);
      axios.get('http://127.0.0.1:8001/axios-server', {
        //url参数
        params: {
          id: 100,
          vip: 7
        },
        //请求头信息
        headers: {
          name: 'atgu',
          age: 20
        }
      }).then(value => {
        console.log(value);
      })
      console.log(2);
    })
    btn2.addEventListener('click', function () {
      axios.post('http://127.0.0.1:8001/axios-server', {
        //url参数
        params: {
          id: 200,
          vip: 10
        },
        //请求头参数
        headers: {
          height: 176,
          weigth: 140
        },
        //请求体
        data: {
          username: 'dds',
          userage: 'ddd'
        }
      }).then(value => {
        console.log(value);
      })
    })
    btn3.addEventListener('click', function () {
      axios({
        //请求的方法
        method: 'POST',
        //url
        url: 'http://127.0.0.1:8001/axios-server',
        //url参数
        params: {
          level: 30,
          age: 30
        },
        //请求头信息
        headers: {
          ContentType: 'application/x-www-form-urlencoded',
          a: 100,
          b: 300
        },
        //请求体参数
        data: {
          username: 'admis',
          password: 'scoket'
        }
      }).then(response => {
        console.log(response);//返回成功的原因
        console.log(response.headers);//响应头信息
        console.log(response.data.name);//响应体
        console.log(response.status);//响应状态码
        console.log(response.statusText);//响应状态字符串
      })
    })
  </script>

</body>

</html>